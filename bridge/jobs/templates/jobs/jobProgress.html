{% comment "License" %}
% Copyright (c) 2018 ISP RAS (http://www.ispras.ru)
% Ivannikov Institute for System Programming of the Russian Academy of Sciences
%
% Licensed under the Apache License, Version 2.0 (the "License");
% you may not use this file except in compliance with the License.
% You may obtain a copy of the License at
%
%    http://www.apache.org/licenses/LICENSE-2.0
%
% Unless required by applicable law or agreed to in writing, software
% distributed under the License is distributed on an "AS IS" BASIS,
% WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
% See the License for the specific language governing permissions and
% limitations under the License.
{% endcomment %}

{% load i18n %}
{% load tz %}
{% load humanize %}

{% if progress %}
    {% if progress.start_decision %}
        <tr>
            <th class="right aligned">{% trans 'Start decision date' %}</th>
            <td>
                {% if progress.start_decision == '-' %}
                    <span>-</span>
                {% else %}
                    {% if user.extended.data_format == 'hum' %}
                        {{ progress.start_decision|naturaltime }}
                    {% else %}
                        {% timezone user.extended.timezone %}
                            {{ progress.start_decision|date:"r" }}
                        {% endtimezone %}
                    {% endif %}
                {% endif %}
            </td>
        </tr>
    {% endif %}
    {% if progress.finish_decision %}
        <tr>
            <th class="right aligned">{% trans 'Finish decision date' %}</th>
            <td>
                {% if progress.finish_decision == '-' %}
                    <span>-</span>
                {% else %}
                    {% if user.extended.data_format == 'hum' %}
                        {{ progress.finish_decision|naturaltime }}
                    {% else %}
                        {% timezone user.extended.timezone %}
                            {{ progress.finish_decision|date:"r" }}
                        {% endtimezone %}
                    {% endif %}
                {% endif %}
            </td>
        </tr>
    {% endif %}
    {% if progress.total_ts %}
        <tr>
            <th class="right aligned">{% trans 'Total tasks to be solved' %}</th>
            <td>{{ progress.total_ts }}</td>
        </tr>
    {% endif %}
    {% if progress.total_sj %}
        <tr>
            <th class="right aligned">{% trans 'Total subjobs to be solved' %}</th>
            <td>{{ progress.total_sj }}</td>
        </tr>
    {% endif %}
    {% if progress.progress_ts %}
        <tr>
            <th class="right aligned">{% trans 'Tasks decision progress' %}</th>
            <td>
                <ul>
                    {% if progress.start_ts %}
                        <li>
                            <b>{% trans 'Start verification tasks solution date' %}:</b>
                            {% if progress.start_ts == '-' %}
                                <span>-</span>
                            {% else %}
                                {% if user.extended.data_format == 'hum' %}
                                    {{ progress.start_ts|naturaltime }}
                                {% else %}
                                    {% timezone user.extended.timezone %}
                                        {{ progress.start_ts|date:"r" }}
                                    {% endtimezone %}
                                {% endif %}
                            {% endif %}
                        </li>
                    {% endif %}
                    {% if progress.progress_ts %}
                        <li>
                            <b>{% trans 'Verification tasks solution progress' %}:</b>
                            <span>{{ progress.progress_ts }}</span>
                        </li>
                    {% endif %}
                    {% if progress.expected_time_ts %}
                        <li>
                            <b>{% trans 'Expected solution time' %}:</b>
                            <span>{{ progress.expected_time_ts }}</span>
                        </li>
                    {% endif %}
                    {% if progress.finish_ts %}
                        <li>
                            <b>{% trans 'Finish verification tasks solution date' %}:</b>
                            {% if progress.finish_ts == '-' %}
                                <span>-</span>
                            {% else %}
                                {% if user.extended.data_format == 'hum' %}
                                    {{ progress.finish_ts|naturaltime }}
                                {% else %}
                                    {% timezone user.extended.timezone %}
                                        {{ progress.finish_ts|date:"r" }}
                                    {% endtimezone %}
                                {% endif %}
                            {% endif %}
                        </li>
                    {% endif %}
                </ul>
            </td>
        </tr>
    {% endif %}
    {% if progress.progress_sj %}
        <tr>
            <th class="right aligned">{% trans 'Subjobs decision progress' %}</th>
            <td>
                <ul>
                    {% if progress.start_sj %}
                        <li>
                            <b>{% trans 'Start subjobs solution date' %}:</b>
                            {% if progress.start_sj == '-' %}
                                <span>-</span>
                            {% else %}
                                {% if user.extended.data_format == 'hum' %}
                                    {{ progress.start_sj|naturaltime }}
                                {% else %}
                                    {% timezone user.extended.timezone %}
                                        {{ progress.start_sj|date:"r" }}
                                    {% endtimezone %}
                                {% endif %}
                            {% endif %}
                        </li>
                    {% endif %}
                    {% if progress.progress_sj %}
                        <li>
                            <b>{% trans 'Subjobs solution progress' %}:</b>
                            <span>{{ progress.progress_sj }}</span>
                        </li>
                    {% endif %}
                    {% if progress.expected_time_sj %}
                        <li>
                            <b>{% trans 'Expected solution time' %}:</b>
                            <span>{{ progress.expected_time_sj }}</span>
                        </li>
                    {% endif %}
                    {% if progress.finish_sj %}
                        <li>
                            <b>{% trans 'Finish subjobs solution date' %}:</b>
                            {% if progress.finish_sj == '-' %}
                                <span>-</span>
                            {% else %}
                                {% if user.extended.data_format == 'hum' %}
                                    {{ progress.finish_sj|naturaltime }}
                                {% else %}
                                    {% timezone user.extended.timezone %}
                                        {{ progress.finish_sj|date:"r" }}
                                    {% endtimezone %}
                                {% endif %}
                            {% endif %}
                        </li>
                    {% endif %}
                </ul>
            </td>
        </tr>
    {% endif %}
{% endif %}
