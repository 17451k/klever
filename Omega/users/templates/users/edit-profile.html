{% extends 'base.html' %}

{% load staticfiles %}
{% load tz %}
{% load i18n %}

{% get_current_timezone as TIME_ZONE %}

{% block title %}{% trans 'Settings' %}{% endblock %}

{% block head_block %}
    <script src="/static/users/js/users.js"></script>
    <link href="/static/users/css/style.css" rel="stylesheet">
{% endblock %}

{% block body_block %}
    <h3><strong>{% trans 'Settings' %}</strong></h3><hr>
    <form id="user_form" method="post" action="{% url 'users:edit_profile' %}">
        {% csrf_token %}
        <div class="row">
            <div class="col-sm-4">
                <label>{{ user_form.new_password.label }}:</label> {{ user_form.new_password }}<br>{{ user_form.errors.new_password }}
                <label>{{ user_form.retype_password.label }}:</label> {{ user_form.retype_password }}<br>{{ user_form.errors.retype_password }}
                <label>{{ user_form.email.label }}:</label> {{ user_form.email }}
            </div>
            <div class="col-sm-4">
                <label>{{ profile_form.first_name.label }}:</label> {{ profile_form.first_name }}<br>{{ profile_form.errors.first_name }}
                <label>{{ profile_form.last_name.label }}:</label> {{ profile_form.last_name }}<br>{{ profile_form.errors.last_name }}
            </div>
            <div class="col-sm-4">
                <label>{{ profile_form.accuracy.label }}:</label> {{ profile_form.accuracy }}<br>{{ profile_form.errors.accuracy }}
                <label>{{ profile_form.data_format.label }}:</label> {{ profile_form.data_format }}<br>
                <label>{{ profile_form.language.label }}:</label> {{ profile_form.language }}<br>
                <label for="timezone">{% trans 'Time zone' %}:</label>
                <select id="timezone" class="form-control" name="timezone">
                    {% for tmz in timezones %}
                        <option value="{{ tmz }}"{% if tmz == user.extended.timezone %} selected="selected"{% endif %}>{{ tmz }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <hr>
        <input type="submit" class="btn btn-success" name="submit" value="{% trans 'Save' %}">
    </form>
    <hr>
    {% include 'users/notifications.html' %}
{% endblock %}