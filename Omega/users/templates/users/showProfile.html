{% extends 'base.html' %}

{% load i18n %}
{% load tz %}

{% block title %}{% trans 'Profile' %}{% endblock %}

{% block body_block %}
    <div class="ui grid">
        <div class="three wide column">
            <h3><cite>{{ target.extended.first_name }} {{ target.extended.last_name }}</cite></h3>
            <div class="ui list">
                {% if target.email %}
                    <div class="item"><span style="color: #a7aab4">{% trans 'Email' %}: </span><ins style="color: #507ab4">{{ target.email }}</ins></div>
                {% endif %}
                <div class="item"><span style="color: #a7aab4">{% trans 'Administrator' %}: </span>{% if target.is_superuser %}{% trans 'Yes' %}{% else %}{% trans 'No' %}{% endif %}</div>
                <div class="item"><span style="color: #a7aab4">{% trans 'Role' %}: </span> {{ target.extended.get_role_display }}</div>
                <div class="item"><span style="color: #a7aab4">{% trans 'Time zone' %}: </span> {{ target.extended.timezone }}</div>
                <div class="item"><span style="color: #a7aab4">{% trans 'Language' %}: </span> {{ target.extended.get_language_display }}</div>
            {% if num_of_solving_jobs %}
                <div class="item"><span style="color: #a7aab4">{% trans 'Number of solving jobs' %}: </span> <a href="{% url 'service:jobs' target.pk %}">{{ num_of_solving_jobs }}</a></div>
            {% endif %}
            </div>
        </div>
        <div class="thirteen wide column">
            <h2>{% trans 'Last Activity' %}</h2>
            {% if activity|length %}
                <table class="ui selectable inverted celled table">
                    <thead>
                        <tr>
                            <th>{% trans 'Date' %}</th>
                            <th>{% trans 'Action Kind' %}</th>
                            <th>{% trans 'Job Title' %}</th>
                            <th>{% trans 'Comment' %}</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for act in activity %}
                        <tr>
                            <td>
                                {% if user_tz %}
                                    {% timezone user_tz %}
                                        {{ act.date }}
                                    {% endtimezone %}
                                {% else %}
                                    {{ act.date }}
                                {% endif %}
                            </td>
                            {% if act.version == 1 %}
                                <td style="color: #58bd2a">{% trans 'Creation' %}</td>
                            {% else %}
                                <td style="color: #31e6ff">{% trans 'Modification' %}</td>
                            {% endif %}
                            {% if act.href %}
                                <td><a href="{{ act.href }}">{{ act.job_name }}</a></td>
                            {% else %}
                                <td>{{ act.job_name }}</td>
                            {% endif %}
                            {% if act.comment %}
                                <td title="{{ act.comment }}"><small>{{ act.small_comment }}</small></td>
                            {% else %}
                                <td></td>
                            {% endif %}
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            {% endif %}
        </div>
    </div>
{% endblock %}