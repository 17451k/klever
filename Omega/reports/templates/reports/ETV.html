{% load i18n %}

{% block reports_head_block %}
    <script src="/static/reports/js/jquery-ui.min.js"></script>
    <script src="/static/reports/js/ETV.js"></script>
    <link href="/static/reports/css/ETV.css" rel="stylesheet">
    {% if etv.html_traces|length == 1 %}
        <script src="/static/reports/js/ETV_single.js"></script>
        <link href="/static/reports/css/ETV_single.css" rel="stylesheet">
    {% else %}
        <script src="/static/reports/js/ETV_double.js"></script>
        <link href="/static/reports/css/ETV_double.css" rel="stylesheet">
    {% endif %}
{% endblock %}
<div class="ui grid">
    <div class="thirteen wide column">
        <div class="ui icon orange small buttons right attached">
            <button id="etv_prev_step" class="ui button normal-popup"><i class="step backward icon"></i></button>
            <div class="ui popup">
                <p style="white-space: nowrap">{% trans 'Backward' %}</p>
            </div>
            {% if etv.html_traces|length == 1 %}
                <button id="etv_start" class="ui button normal-popup"><i class="play icon"></i></button>
                <div class="ui popup">
                    <p style="white-space: nowrap">{% trans 'Start from first string' %}</p>
                </div>
            {% endif %}
            <button id="etv_next_step" class="ui button normal-popup"><i class="step forward icon"></i></button>
            <div class="ui popup">
                <p style="white-space: nowrap">{% trans 'Forward' %}</p>
            </div>
            <button id="etv_play_forward" class="ui button normal-popup"><i class="forward icon"></i></button>
            <div class="ui popup">
                <p style="white-space: nowrap">{% trans 'Play from selected string' %}</p>
            </div>
            <button id="etv_play_backward" class="ui button normal-popup"><i class="backward icon"></i></button>
            <div class="ui popup">
                <p style="white-space: nowrap">{% trans 'Play backward from selected string' %}</p>
            </div>
            <button id="etv_pause_play" class="ui button normal-popup"><i class="pause icon"></i></button>
            <div class="ui popup">
                <p style="white-space: nowrap">{% trans 'Pause' %}</p>
            </div>
        </div>
        <div class="ui small input">
        <select id="select_speed" class="ui dropdown attached">
            <option value="1">1 {% trans 'second for string' %}</option>
            <option value="2">2 {% trans 'seconds for string' %}</option>
            <option value="3">3 {% trans 'seconds for string' %}</option>
            <option value="4">4 {% trans 'seconds for string' %}</option>
            <option value="5">5 {% trans 'seconds for string' %}</option>
            <option value="10">10 {% trans 'seconds for string' %}</option>
        </select>
        </div>
        <label for="select_speed"></label>
    </div>
    <div class="three wide column right aligned">
        <a class="ui icon basic tiny button" href="{% if fullscreen %}{% url 'reports:leaf' 'unsafe' report.pk %}{% else %}{% url 'reports:etv' report.pk %}{% endif %}">
            <i class="{% if fullscreen %}remove{% else %}maximize{% endif %} icon"></i>
        </a>
    </div>
</div>

<div id="etv" class="ui orange segment {% if fullscreen %} fullscreen{% endif %}">
    {% if etv.html_traces|length == 1 %}
        {% include 'reports/ETV_single.html' %}
    {% else %}
        {% include 'reports/ETV_double.html' %}
    {% endif %}
    <div id="etv-source">
        <div style="margin: 10px;">
            <div class="ETVTitleBlock">
                <h4 id="ETVSourceTitle" class="header" style="padding-bottom: 7px;"></h4>
            </div>
            <div class="filecontent" id="ETV_source_code"></div>
        </div>
    </div>
    <div id="etv-assumes">
        <div id="ETV_assumes">
        </div>
    </div>
    <div id="etv-divider"></div>
    <div id="etv-divider-2"></div>
</div>

<div id="etv-attributes" class="ui popup very wide" style="white-space: nowrap;">
    <div class="ui grid">
        <div class="sixteen wide column left aligned">
            {% for attribute in etv.attributes %}
                <span class="ui violet header small">{{ attribute.0 }}</span>: <span class="small">{{ attribute.1 }}</span><br>
            {% endfor %}
        </div>
    </div>
</div>

<span id="error___line_not_found" hidden>{% trans 'The line was not found' %}</span>
<span id="error___no_selected_line" hidden>{% trans 'Please select the line first' %}</span>
<span id="play_finished" hidden>{% trans 'Error trace autoselect finished' %}</span>